

<RegisterScreen>:
    name: "Register"
    id: RegisterScreen
    namee: namee
    email: email
    password: passw

    FloatLayout:
        cols:1

        FloatLayout:
            size: root.width, root.height/2

            Label:
                id:created
                text: "Create an Account"
                size_hint: 0.8, 0.2
                pos_hint: {"x":0.1, "top":1}
                font_size: (root.width**2 + root.height**2) / 14**4

            Label:
                id: namee_label
                size_hint: 0.5,0.12
                pos_hint: {"x":0, "top":0.8}
                text: "Name: "
                font_size: (root.width**2 + root.height**2) / 14**4

            TextInput:
                pos_hint: {"x":0.5, "top":0.8}
                size_hint: 0.4, 0.12
                id: namee
                multiline: False
                font_size: (root.width**2 + root.height**2) / 14**4

            Label:
                id: email_label
                size_hint: 0.5,0.12
                pos_hint: {"x":0, "top":0.8-0.13}
                text: "Email: "
                font_size: (root.width**2 + root.height**2) / 14**4

            TextInput:
                pos_hint: {"x":0.5, "top":0.8-0.13}
                size_hint: 0.4, 0.12
                id: email
                multiline: False
                font_size: (root.width**2 + root.height**2) / 14**4

            Label:
                id: password_label
                size_hint: 0.5,0.12
                pos_hint: {"x":0, "top":0.8-0.13*2}
                text: "Password: "
                font_size: (root.width**2 + root.height**2) / 14**4

            TextInput:
                pos_hint: {"x":0.5, "top":0.8-0.13*2}
                size_hint: 0.4, 0.12
                id: passw
                multiline: False
                password: True
                font_size: (root.width**2 + root.height**2) / 14**4

        Button:
            id:relogin
            pos_hint:{"x":0.3,"y":0.25}
            size_hint: 0.4, 0.1
            font_size: (root.width**2 + root.height**2) / 17**4
            text: "Already have an Account? Log In"
            on_release:
                root.manager.transition.direction = "left"
                root.login()

        Button:
            id: submit
            pos_hint:{"x":0.2,"y":0.05}
            size_hint: 0.6, 0.15
            text: "Submit"
            font_size: (root.width**2 + root.height**2) / 14**4
            on_release:
                root.manager.transition.direction = "left"
                root.submit()


<LoginScreen>:
    name: "Login"
    id: LoginScreen
    email: email
    password: password
    space_x: self.size[0]/3
    spacing: 0

    canvas.before:
        Color:
            rgba:(0,0,0,0)
        Rectangle:
            pos:self.pos
            size:self.size
    BoxLayout:
        size_hint_y: None
        pos_hint: {"x":0, "top":0.999}
        height: 50
        canvas.before:
            Color:
                rgba:(.30,.23,.43,0.2)
            Rectangle:
                pos:self.pos
                size:self.size
        Label:
            text:"Sign In"
            bold:True
            size_hint_x: .9

    BoxLayout:
        orientation: "vertical"
        spacing:20
        padding:LoginScreen.space_x,10
        BoxLayout:
            orientation: "vertical"
            pos_hint:{"x":0, "top":0.8}
            spacing: 10
            size_hint_y:None
            height:80

            TextInput:
                id: email
                multiline: False
                focus:True
                hint_text: "Email"
                on_text_validate:password.focus=True

            TextInput:
                id: password
                multiline: False
                password: True
                hint_text:"Password"
        Label:
            id: sp1
            size_hint_y:None
            height:40
        Button:
            text: "Login"
            size_hint_y:None
            height:40
            background_color:(.30,.23,.43,0.2)
            background_normal:''

            on_release:
                root.manager.transition.direction = "up"
                root.loginBtn()
        Button:
            size_hint_y: None
            height: 40
            text: "Don't have an Account? register"
            on_release:
                root.manager.transition.direction = "right"
                root.registerBtn()


<MainScreen>:
    id:MainScreen
    n: n
    email: email
    created:created

    FloatLayout:
        size_hint: (None,None)
        height: 0.9*root.height
        width: root.width
        Label:
            id: n
            pos_hint:{"x": 0.1, "top":0.9}
            size_hint:0.8, 0.2
            text: "Account Name: "

        Label:
            id: email
            pos_hint:{"x": 0.1, "top":0.7}
            size_hint:0.8, 0.2
            text: "Email: "

        Label:
            id: created
            pos_hint:{"x": 0.1, "top":0.5}
            size_hint:0.8, 0.2
            text: "Created: "


    BoxLayout:
        orientation: "horizontal"
        spacing: 10
        size_hint: (None,None)
        height: root.height*0.1
        width: root.width
        Button:
            id: gochat_button

            text: "Chat"

            on_release:
                app.root.current = "Chat"
                root.manager.transition.direction = "down"
        Button:
            id: logout_button

            text: "Log Out"
            on_release:
                app.root.current = "Login"
                root.manager.transition.direction = "down"

<ChatScreen>
    name: "Chat"
    id:ChatScreen
    messages: messages

    to_send: to_send


    GridLayout:
        cols:1
        rows:2

        ScrollView:
            size: root.width, root.height*0.9
            canvas.before:
                Color:
                    rgba:(.30,.23,.43,0.2)
                Rectangle:
                    pos:self.pos
                    size:self.size
            Label:

                id: messages
                text: "messages"
                font_size: (root.width**2 + root.height**2) / 14**4
                markup:True

        GridLayout:
            cols:2
            size_hint: (None, None)
            height:root.height*0.1
            width:root.width


            TextInput:
                id:to_send
                name: to_send
                size_hint: (None, None)
                hint_text: "type..."
                width: root.width*0.8
                multiline: True



            Button:
                id: send_button
                background_color:(0,0,0,0)
                background_normal:''
                text: "Send"
                on_release:
                    root.manager.transition.direction = "up"
                    root.sendBtn()